-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  role ENUM('user', 'admin') DEFAULT 'user',
 profile_picture VARCHAR(255) DEFAULT '../uploads/users/default.png';

);


-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ²
CREATE TABLE categories (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
CREATE TABLE items (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  price DECIMAL(10,2),
  stock INT,
  image_url VARCHAR(255),
  category_id INT,
  FOREIGN KEY (category_id) REFERENCES categories(id)
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙˆØ±Ø¯Ø±Ø§Øª
CREATE TABLE orders (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT,
  item_id INT,
  quantity INT,
  status ENUM('pending', 'confirmed', 'canceled', 'delivered') DEFAULT 'pending',
  order_date DATETIME DEFAULT CURRENT_TIMESTAMP,
  room_number VARCHAR(10),
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (item_id) REFERENCES items(id)
);

-- âœ… ÙƒÙˆÙŠØ±ÙŠØ² CRUD

-- ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
-- Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
-- SELECT * FROM users;

-- Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
-- INSERT INTO users (username, email, password) VALUES (?, ?, ?);

-- ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…
-- UPDATE users SET username = ?, email = ? WHERE id = ?;

-- Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…
-- DELETE FROM users WHERE id = ?;


-- ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
-- Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
-- SELECT * FROM items;

-- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
-- INSERT INTO items (name, description, price, stock, image_url, category_id) VALUES (?, ?, ?, ?, ?, ?);

-- ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬
-- UPDATE items SET name = ?, price = ?, stock = ? WHERE id = ?;

-- Ø­Ø°Ù Ù…Ù†ØªØ¬
-- DELETE FROM items WHERE id = ?;


-- ğŸ—‚ï¸ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ²
-- Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ²
-- SELECT * FROM categories;

-- Ø¥Ø¶Ø§ÙØ© ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠ
-- INSERT INTO categories (name) VALUES (?);

-- ØªØ¹Ø¯ÙŠÙ„ ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠ
-- UPDATE categories SET name = ? WHERE id = ?;

-- Ø­Ø°Ù ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠ
-- DELETE FROM categories WHERE id = ?;


-- ğŸ§¾ Ø§Ù„Ø£ÙˆØ±Ø¯Ø±Ø§Øª
-- Ø¹Ø±Ø¶ Ø£ÙˆØ±Ø¯Ø±Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ÙŠÙ†
-- SELECT * FROM orders WHERE user_id = ?;

-- Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„ÙŠÙˆØ²Ø± (pending)
-- SELECT * FROM orders WHERE user_id = ? AND status = 'processing';

-- Ø¥Ø¶Ø§ÙØ© Ø£ÙˆØ±Ø¯Ø± Ø¬Ø¯ÙŠØ¯
-- INSERT INTO orders (user_id, item_id, quantity) VALUES (?, ?, ?);

-- ØªØ¹Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø£ÙˆØ±Ø¯Ø± Ù…Ø¹ÙŠÙ† Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ÙŠÙ†
-- UPDATE orders SET status = ? WHERE id = ? AND user_id = ?;

-- Ø­Ø°Ù Ø£ÙˆØ±Ø¯Ø± Ù…Ø¹ÙŠÙ† Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ÙŠÙ†
-- DELETE FROM orders WHERE id = ? AND user_id = ?;

-- Ø§Ù„Ø£Ø¯Ù…Ù† ÙŠÙƒÙ†Ø³Ù„ Ø£ÙˆØ±Ø¯Ø± Ø·Ø§Ù„Ù…Ø§ Ù…Ø´ delivered
-- UPDATE orders SET status = 'canceled' WHERE id = ? AND status != 'delivered' AND status != 'confirmed';
